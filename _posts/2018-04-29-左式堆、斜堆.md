---
layout:     post
title:      左式堆、斜堆
subtitle:   左式堆、斜堆
date:       2018-04-29
author:     carson
header-img: img/post-bg-2015.jpg
catalog: true
tags:
    - 数据结构
---

### 意义
因为根据二叉堆的特性，一般使用数组来实现会使二叉堆的操作更快，不过如果要进行堆的合并，二叉堆由于数组大小等限制会比较复杂，不便操作。因此设计一种堆结构，既保持堆序和结构性，也要支持高效地*合并*操作是很有必要的。这样就衍生出了**左式堆**和**斜堆**

### 术语
*零路径长(null path length，NPL)*：任一节点X到一个非满节点的最短路径的长。0个或1个儿子的零路径长为0，空节点的零路径长为-1。

### 左式堆(leftist heap)

##### 性质

* 对于堆中的任意一个节点X，左儿子的零路径长大于等于右儿子的零路径长。

> 根据这个性质可以知道，左式堆倾向于增加左子树的深度，而且从根开始的右路径是该堆中的最短路径，否则就会破坏左式堆的性质。

* 在右路径上有r个节点的左式堆必然至少有2r-1个节点。

> 想要证明这个性质，可以用数学归纳法，对右路径有r个节点左式堆，其左右子树都是右路径有r-1个节点的左式树，递归地进行分析会发现，最后会得到一棵高度为r+1的完全二叉树。因此计算高度为r+1的完全二叉树的节点数就是这个左式堆的最少节点数。从这个定理可以立刻得出：

> > N个节点的左式树，有一条右路径最多含有⌊log(N+1)⌋个节点。

##### 合并操作

对于左式堆的基本操作就是*合并*。

因为插入操作可以看成是一个大的左式堆和一个单节点堆的合并操作，而删除操作可以看成是删除根节点后的左右子树合并操作。

如果合并的两个堆又一个是空的，那么返回另外一个堆。否则为了合并这两个堆，执行以下操作：
1. 比较H1、H2的根，假设H1的根值小于H2
2. 将H2与H1的右子堆H3合并，比较H2和H3的值，较小者将作为H1的新右子堆
3. 对H2和H3中的较小者的右子堆，与另外一个较大的堆递归地执行第一步
4. 交换不符合左式堆性质的左右子堆
5. 更新零路径长

### 斜堆(skew heap)

斜堆是左式堆的自调节形式，实现起来很简单。斜堆与左式堆的关系类似于avl树和伸展树的关系。

斜堆不存在树的结构限制，不同于左式堆，斜堆上任意节点的零路径长的任何信息都不保留。所以存在一个斜堆只有右儿子，这样对于斜堆的合并操作存在最坏时间界O(N)。

但是，斜堆的合并操作相对左式堆，左式堆的合并操作中的第四步对应斜堆是*无条件*交换左右子堆。

因此，正如伸展树一样，可以证明(略)任意M次连续操作，总的最坏情形运行时间是O(MlogN)，所以斜堆的每次操作的摊还时间是O(logN)。

> 总结斜堆优点：

> * 操作的摊还时间是O(logN)
> * 不需要附加的空间存储零路径长这样的信息
> * 不需要测试比较是否交换节点的左右儿子

